## 01. 프로세스 간 통신
### 프로세스 간 통신의 개념
- 스레드 : 하나의 프로세스 내에서 자원을 공유하는 실행 단위
- 서로 다른 프로세스는 사용하는 메모리 영역이 다르기 때문에 공유된 메모리를 통하여 통신하는 것이 쉽지 않음
- 프로세스 간 통신(Inter Process Communication, IPC) : 운영체제에서 제공되는 프로세스 간 통신 방법
- 통신 : 데이터를 주거나 받는 것
  - 데이터를 보내는 프로세스 - send(message)
  - 데이터를 받는 프로세스 - receive(message)

#### 프로세스 간 통신의 종류
- 공유 메모리나 공유 파일을 이용한 통신
  - 가장 원시적인 방식
  - 일정한 메모리 영역이나 파일을 공유
  - 데이터를 주고받는 방법을 프로세스끼리 알아서 결정해야함
- 파이프를 이용한 통신
  - 하나의 컴퓨터 내에서 프로세스 간 통신에 가장 많이 사용되는 수단
  - 운영체제가 제공하는 통신 기법
  - 보통 파이프는 fork()로 만들어진 부모-자식 간 통신에 사용됨
- 소켓을 이용한 통신 
  - 소켓 : 네트워크로 연결된 컴퓨터에서 데이터를 주고받기 위한 통신 기법
  - 같은 컴퓨터 내의 프로세스끼리도 소켓으로 통신할 수 있지만 소켓방식은 초기화할 내용도 많고 시스템 자원도 많이 사용함 → 따라서 같은 컴퓨터 내에서 소켓으로 통신하는 것은 비효율적


### 프로세스 간 통신의 분류
#### 통신 방향에 따른 분류
- 양방향 통신
  - 데이터를 양쪽 방향으로 동시에 전송할 수 있는 구조
  - 일반적인 통신은 모두 양방향 통신
  - ex) 전화, 소켓
- 반양방향 통신
  - 데이터를 양쪽 뱡향으로 전송할 수 있지만 동시 전송은 불가능, 특정 시점에 한쪽 방향으로만 전송할 수 있는 구조
  - ex) 무전기
- 단방향 통신
  - 한쪽 방향으로만 데이터를 전송할 수 있는 구조
  - 단뱡향 통신에서 양방향 통신을 구현하고 싶다면 공유 메모리를 2개 사용해야 함
  - ex) 모스 부호, 공유 메모리나 공유 파일을 이용한 통신, 파이프를 이용한 통신

#### 통신 구현 방식에 따른 분류
- 공유 메모리를 사용하는 통신 방식의 가장 큰 문제점
  - 상대방이 데이터를 언제 보낼지 알 수 없기에 데이터를 받는 쪽에서 반복적으로 공유 메모리를 점검해야함
  - 바쁜 대기(busy waiting) : 반복문을 무한 실행하며 기다림 → 시스템 차원에서 바쁜 대기는 자원 낭비가 큼
  - ex) 우편함에 편지가 있는지 수시로 확인
- 동기화
  - 바쁜 대기 문제를 해결하기 위해 사용 → 운영체제가 데이터 도착 여부를 알려줌
  - ex) 메신저에서 메시지가 도착했다고 알려주는 알림
>- 대기가 있는 통신(blocking communication)
>  - 동기화 통신(synchronous communication)
>  - 바쁜 대기 해결
>  - 데이터를 받는 쪽은 데이터가 도착할 때까지 자동으로 대기 상태에 머물러 있음
>  - 통신 기법 : 파이프 이용 통신, 소켓 이용 통신
>- 대기가 없는 통신(non-blocking communication)
>  - 비동기화 통신(asynchronous communication)
>  - 바쁜 대기 사용
>  - 데이터를 받는 쪽은 바쁜 대기를 사용하여 데이터가 도착했는지 여부를 직접 확인
>  - 통신 기법 : 공유 메모리나 공유 파일 이용 통신


### 프로세스 간 통신의 종류
#### 파일을 이용한 통신
- 운영체제 입장에서 파일을 이용한 통신은 `일반 프로세스`와 `입출력 프로세스` 간의 통신임
- 부모-자식 관계의 프로세스 간 통신에 많이 사용됨
- 운영체제가 프로세스 동기화를 제공하지 않음 → 부모 프로세스가 wait() 함수를 이용하여 자식 프로세스의 작업이 끝날 때 까지 기다렸다가 작업을 시작
>- 파일 열기
>  - open() 함수 : 사용하고자 하는 파일이 있는지, 쓰기 권한이 있는지 확인 → 정상적 파일이라면 fd 반환
>  - fd : 파일 기술자, 해당 파일에 접근할 수 있는 일종의 열쇠
>  - 파일 기술자(file descriptor) : 어떤 파일에 접근할 수 있는 권한, 파일의 식별자로도 사용됨
>  - 파일 기술자를 통해서만 파일에 접근 가능
>- 파일 쓰기 또는 읽기
>  - 파일을 쓰거나 읽을때는 fd를 항상 기재함
>- 파일 닫기
>  - close() 함수 : 파일을 닫는 함수
>  - close(fd) : 해당 fd가 가리키는 파일을 닫음

#### 파이프를 이용한 통신
- 양방향 통신을 위한 운영체제가 제공하는 동기화 통신 방식
  - 단방향 통신 : 파이프 1개
  - 양방향 통신 : 파이프 2개
- 예) A, B 프로세스가 파이프 통신을 할 때
  - A 프로세스가 파이프 1에 아직 쓰기 연산을 하지 않았을 경우 → B 프로세스는 대기상태가 됨
  - A 프로세스가 파이프 1에 데이터를 넣음 → 동기화로인해 자동적으로 B 프로세스 대기상태 종료
  - 따라서 A 프로세스와 B 프로세스는 바쁜 대기를 하지 않아도 됨
- 파이프의 종류
  - 이름 없는 파이프 : 일반적인 파이프, 부모-자식 프로세스간의 통신 또는 같은 부모를 가진 자식들 간의 통신에 사용
  - 이름 있는 파이프 : FIFO라 불리는 특수 파일을 이용함, 서로 관련 없는 프로세스간 통신에 사용

#### 소켓을 이용한 통신
- 네트워킹 : 소켓을 이용한 여러 컴퓨터에 있는 프로세스끼리의 통신 
- 클라이언트들은 포트에 연결된 멀티 소켓에 하나씩 연결됨
- 그래서 네트워크 프로그래밍을 소켓 프로그래밍이라고 부름
> ex) 콘센트는 하나인데 여러 개의 가전 제품을 동시에 사용하려면 멀티탭을 연결해야 하듯이, 하나의 포트에 여러 클라이언트를 연결하려면 `소켓`이 필요함
- 네트워킹 상황에서의 통신 (원격 프로시저 호출, 소켓 사용)
  - 원격 프로시저 호출
    - 원격 프로시저 : 다른 컴퓨터에 있는 함수를 호출
    - 원격 프로시저 호출은 소켓을 이용하여 구현
    - IP, Port를 이용해 해당 원격 서버의 프로세스들중 사용하려는 프로세스와 소켓으로 연결됨