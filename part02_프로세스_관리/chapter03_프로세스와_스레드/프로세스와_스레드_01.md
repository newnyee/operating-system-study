## 01. 프로세스의 개요
### 프로세스의 개념
- `프로그램`은 저장장치에 저장된 `정적인 상태`, `프로세스`는 실행을 위해 **메모리에 올라온** `동적인 상태`

### 프로세스 구조
- 코드 영역
- 데이터 영역
- 스택 영역

### 프로세스 제어 블록(Process Control Block, PBC)
  - 작업 지시서, 프로세스 제어 블록이 없다면 프로그램이 프로세스로 전환되지 못함
  - 운영체제 영역에 만들어짐
  - 프로세스가 종료되면 프로세스는 메모리에서 삭제되고 프로세스 제어 블록도 폐기됨
  - 사용자 프로세스와 커널 프로세스가 섞여서 실행됨
- 프로세스 제어 블록의 대표적 정보 3가지
  - 프로세스 구분자 : Process IDentification, PID
  - 메모리 관련 정보 메모리 위치 정보, 메모리 보호를 위한 경계 레지스터와 한계 레지스터 등 메모리와 관련된 정보
  - 각종 중간값 : 이후 작업을 위한 현재 작업 진행 정도를 저장(프로그램 카운터)
> 프로세스 = 프로그램 + 프로세스 제어 블록 <br>
> 프로그램 = 프로세스 - 프로세스 제어 블록

### 프로세스의 상태
- 일괄 작업 시스템의 경우 한 작업이 끝나야만 CPU를 반환하기 때문에 생성, 실행, 완료의 3가지 상태를 갖음
- 시분할 시스템의 경우 CPU 시간 할당량이 있기 때문에 생성, 준비, 실행, 대기, 완료의 5가지 상태를 갖음
>- 생성 상태(create status)
>   - 프로세스가 메모리에 올라와 실행 준비를 완료한 상태, 프로세스 제어 블록을 할당받은 상태
>- 준비 상태(ready status)
>   - 생성된 프로세스가 CPU를 얻을 때까지 기다리는 상태
>   - 다수의 준비 큐가 운영됨
>- 실행 상태(running status, execute status)
>   - 준비 상태에 있는 프로세스 중 하나가 CPU를 얻어 실제 작업을 수행하는 상태
>   - 준비 상태에 있는 프로세스 중 실행 상태 프로세스의 수는 CPU의 개수 만큼임
>- 대기 상태(blocking status, wait status)
>   - 작업 효율성을 높이기 위해 만들어짐
>   - 입출력을 요구한 프로세스가 입출력이 완료될 때까지 기다리는 상태
>   - 입출력장치별로 마련된 큐에 대기됨
>- 완료 상태(terminate status)
>   - 프로세스 제어 블록이 사라진 상태
>   - 코어 덤프로 종료 직전의 메모리 상태를 확인함으로써 오류를 수정할 수 있게 해줌

### 휴식 상태와 보류 상태
- 프로세스의 상태는 활성 상태(생성, 준비, 실행, 대기, 완료)와 휴식상태, 보류 상태로 나누어짐
>휴식 상태
>   - 프로세스가 작업을 일시적으로 쉬고있는 상태
>   - 사용하던 데이터가 메모리에 그대로 있고 프로세스 제어 블록도 유지되므로 프로세스를 멈춘 시점에서부터 재시작 가능

>보류 상태(suspend status)
> - 프로세스가 메모리에서 잠시 쫒겨난 상태
> - 보류 상태에 들어가 스왑 영역에 보관됨
> - 보류상태가 되는 경우 (컴퓨터의 성능을 떨어뜨리거나 실행을 미루어도 큰 지장이 없는 프로세스가 해당됨)
>   - 메모리가 꽉차서 일부 프로세스를 메모리 밖으로 내보낼 때
>   - 프로그램에 오류가 있어서 실행을 미루어야 할 때
>   - 바이러스와 같이 악의적인 공격을 하는 프로세스라고 판단될 때
>   - 매우 긴 주기로 반복되는 프로세스라 메모리 밖으로 쫒아내도 큰 문제가 없을 때
>   - 입출력을 기다리는 프로세스의 입출력이 지연될 때

>보류 대기 상태 : 대기 상태에 스왑 영역으로 옮겨짐 <br>
>보류 준비 상태 : 준비 상태에 스왑 영역으로 옮겨짐, 보류 대기 상태의 프로세스가 완료되었을 때 보류 준비 상태로 넘어감

## 02. 프로세스 제어 블록과 문맥 교환
### 프로세스 제어 블록의 구성 (순서대로 저장됨)
1. 포인터 : 준비상태나 대기상태 큐에 PCB의 물리적 위치를 가리키는 포인터가 저장됨
2. 프로세스 상태 : 생성, 준비, 실행, 대기, 보류 준비, 보류 대기
3. 프로세스 구분자
4. 프로그램 카운터 : 다음에 실행될 명령어의 위치를 가리키는 프로그램 카운터의 값을 저장
5. 프로세스 우선순위 : 프로세스의 우선순위를 결정하기위해 사용됨 (커널 프로세스 >> 사용자 프로세스)
6. 각종 레지스터 정보 : 이후 작업을 위한 현재 작업 진행 시 사용된 레지스터의 값을 보관
7. 메모리 관리 정보
8. 할당된 자원 정보 : 입출력 자원이나 오픈 파일등에 대한 정보
9. 계정 정보 : 계정 번호, CPU 할당 시간, CPU 사용 시간 등에 대한 정보 저장
10. 부모 프로세스 구분자와 자식 프로세스 구분자 : 부모 프로세스 아이디(Parent PID, PPID)와 자식 프로세스 아이디(Child PID, CPID) 정보 저장

### 문맥 교환(Context switching)
#### 문맥 교환의 의미
- CPU를 차지하던 프로세스가 나가고 새로운 프로세스를 받아들이는 작업

#### 문맥 교환의 절차
- 인터럽트 발생시 문맥교환 발생
- 실행상태에서 나가는 PCB : 지금까지의 작업내용을 저장
- 실행 상태로 들어오는 PCB : 해당 PCB의 내용으로 CPU 세팅

#### 문맥 교환과 타임 슬라이스의 크기
- 타임 슬라이스의 크기가 너무 크면 시스템 성능이 떨어짐
- 타임 슬라이스의 크기가 너무 작으면 오버헤드 발생이 많아지게됨
- 적당한 타임 슬라이스 : 10 ~ 200밀리초

## 📌프로세스 관련 용어
- PCB(Process Control Block) ,TCB(Task Control Block) : 프로세스를 실행하는 데 필요한 정보를 보관하는 자료구조
- CPU 스케줄러 : 준비 상태에 있는 여러 프로세스 중 다음에 실행할 프로세스를 선정하는 일을 함
- 디스패치(dispatch) : 준비상태의 프로세스 중 하나를 골라 실행 상태로 바꾸는 CPU 스케줄러의 작업
- 타임 슬라이스, 타임 퀀텀 : 프로세스에 배당된 작업 시간
- 타임 아웃 : 프로세스 자신에게 주어진 하나의 타임 슬라이스 동안 작업을 끝내지 못하면 다시 준비 상태로 돌아가는 것
- 클록 : 인터럽트를 사용하여 프로세스에게 배당된 작업 시간이 종료되었음을 알리는 역할을 함
- 강제 종료(abort) : 오류나 나른 프로세스에 의한 비정상적 종료
- 코어 덤프(core dump) : 프로세스가 강제 종료 됐을 시 강제 종료 직전의 메모리 상태를 저장장치에 기록한 메모리 파일
- 스왑 영역(swap area) : 메모리에 쫓겨난 데이터가 임시로 보관되는 곳
